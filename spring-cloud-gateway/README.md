#### 1. 第一代网关 Zuul 和 第二代网关 Gateway 比较
* `Spring Clound Gateway` 服务网关是建立在 Spring Framework 5 之上的，使用非阻塞模式，并且支持长连接 Websocket。
* `Spring Cloud Zuul` 是基于 `Servlet` 的，采用HttpClient 进行请求转发，使用阻塞模式。
* 在性能上，服务网关  由于 `Zuul`,并且服务网关几乎实现了 Netflix Zuul 的全部功能。
* 在使用和功能上，用服务网关替换掉 Netflix Zuul的成本非常低的，几乎可以实现无缝切换。

#### 2. 服务网关作为整个分布式系统的流量入口，有着举足轻重的作用：
1. 协议转换，路由转发；
2. 流量聚合，对流浪进行监控，日志输出；
3. 作为整个系统的前端工程，对流量进行控制，有限流的作用；
4. 作为系统的前端边界，外部流量只能通过网关才能访问系统；
5. 可以在网关层做权限判断；
6. 可以在网关层做缓存。

#### 3. 服务网关的实现原理
1. 第一代网关 Zuul 有两大核心组件，分别是 路由（Router） 和 过滤器（Filter）。
2. 第二代服务网关 Geteway 多了一个断言（Predicate），用来判断请求到底交给哪一个 Gateway Web Handler 处理。
3. 如果 请求和路由匹配（这时就会用到断言），则将其发送到相应的 Gateway Web Handler处理。在处理请求时会经过一系列的过滤器链。
    * 在执行所有的 “pre” 过滤器逻辑时，一般可以实现**鉴权**、**限流**、**日志输出**、**更改请求头**、**转换协议**等功能；
    * 在收到请求之后，会执行所有的“post” 过滤器的逻辑，这里可以对响应数据进行修改，比如更改响应头和转换协议等。
    * **重点：** 将请求和路由进行匹配，这是需要用到断言来决定请求应该走哪一个路由。

#### 4. 断言工厂
> 断言（predicate）来自于Java 8 的接口。该接口接受一个输入参数，返回一个布尔值结果，包含多种默认方法将断言组合成其他复杂的逻辑（比如：与，非，或）。
>
1. After 路由断言工厂；
    * 新建一个Spring Boot工程 `spring-cloud-gateway` ；
    * 引入相关依赖包：见（spring-cloud-gateway/pom.xml）文件
    * 浏览器访问：[http://localhost:8081/get](http://localhost:8081/get)
    * 如果访问失败，将出现 `404` 相关报错信息；如果成功，则将出现 `JSON` 字符串信息。
    * 详解：在设置 `application.yaml` 文件中，如果设置的 `-After=` 后的值值得注意：
        * 如果请求的时间在这个配置的时间之后，请求会被路由转发到 [http://httpbin.org:80]
        * 如果我们将配置的时间设置在当前时间之后，浏览器会显示错误信息 `404`，此时请求没有路由到配置的 URL。
    * 提醒：如果修改了 ‘uri: http://httpbin.org:80’ 为其他的后，出现了错误页面，尝试将浏览器的缓存情况，或者重启浏览器，再试试。

2. 
